<?xml version="1.0" encoding="utf-8"?>
<search>
<% if(posts){ -%>
<% posts.slice(0,limit).each(function(post){ -%>
  <entry>
    <title><%-: post.title | cdata %></title>
    <url><%- encodeURIComponent(config.root + post.path) %></url>
    <content type="text"><%-: raw ? post[raw] : post.content | cdata %></content>
<% if(post.categories&&post.categories.length>0){ -%>
      <categories>
<% post.categories.each(function (cate) { -%>
        <category><%= cate.name %></category>
<% }) -%>
      </categories>
<% } -%>
<% if(post.tags&&post.tags.length>0){ -%>
      <tags>
<% post.tags.each(function (tag) { -%>
        <tag><%= tag.name %></tag>
<% }) -%>
      </tags>
<% } -%>
  </entry>
<% }) -%>
<% } -%>
<% if(pages){ -%>
<% pages.each(function(page){ -%>
  <entry>
    <title><%-: page.title | cdata %></title>
    <url><%- encodeURIComponent(config.root + page.path) %></url>
    <content type="text"><%-: raw ? page[raw] : page.content | cdata %></content>
  </entry>
<% }) -%>
<% } -%>
</search>

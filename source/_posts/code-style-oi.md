title: Menci's Code Style for OI
categories:
  - OI
tags:
  - 代码规范
permalink: code-style-oi
date: '2017-01-09 08:31:00'
---

本文介绍本人在 OI 中常用的代码规范。

<!-- more -->

### 概览

所有的 `#include` 指令**必须**放置于整个程序开头。

*不应该*使用 `using namespace std;`。

`main` 函数*应该*放置于整个程序末尾。

*不应该*使用 `int` 代替 `bool` 表示逻辑值。

### 预编译指令

`#include` 中，C 标准库头文件**必须**使用 `c` 前缀，而不是 `.h` 后缀。

`#include` 中，C 标准库头文件*应该*放置于 C++ 标准库头文件前，其它头文件（如果有）应放置于最后。

所有的预编译指令（包括 `#ifdef` 等）**不能**缩进。

### 缩进

对于每个代码块，使用 4 空格或等长的 Tab 缩进。

### 花括号

花括号**必须**遵循以下两种写法之一，前一种被称为「花括号不换行」，后一种被称为「花括号换行」。

对于「花括号不换行」，左花括号的左边**必须**有且仅有一个空格。

对于「花括号换行」，左花括号**必须**与上一级代码块的缩进相同。

所有右花括号**必须**与上一级代码块的缩进相同。

```cpp
// 1
if (condition) {

} else {

}

// 2
if (condition)
{

}
else
{

}
```

### 行

除 `for` 中的三个语句外，每行**不能**有超过一个语句。如果需要一行内求值多个表达式，*可以*使用等效的逗号表达式替代。

多个意义独立的代码块之间*应该*用空行隔开。

右花括号前*不应该*有多余的空行。

*不应该*有两个连续的空行。

非空行尾*不应该*有多余的空格。

所有的 `#include` 指令之后**必须**有一个空行。

如果有 `using namespace std;`，则**必须**紧跟在 `#include` 后的空行后，之后**必须**一个空行。

函数、成员函数、结构体、全局变量块之间**必须**用空行隔开。

```cpp
#include <cstdio>
#include <algorithm>

const int MAXN = 100;
const int MAXM = 200;

int n, m, a[MAXN + 1];
double p, q, x, y;

int main()
{
    p = 1, q = 2;
    return 0;
}
```

### 函数

`main` 函数的返回值类型**必须**是 `int`，*可以*省略 `return 0;`。

空函数体*可以*使用 `{}`。

传参时，*应该*根据实际需要使用「引用」、「`const` 引用」和「值传递」。

### 变量

*应该*尽量少使用全局变量。

局部变量**必须**在用时定义，变量名*不应该*与上一个块中的变量重名，*可以*与全局变量重名。

只在一个函数内使用到的需要全局空间（如大数组）或生命周期的变量，**必须**定义为 `static` 的局部变量。

### 空格

逗号 `,` 与 `for` 中的分号 `;` 后面**必须**有一个空格，前面**不能**有空格。

左圆（方）括号后、右圆（方）括号前，在书写长表达式时，为了便于阅读，*可以*加一个空格，如

```cpp
f[i][j] = f[ f[i][j - 1] ][j - 1]
```

双目运算符、三目运算符的两侧**必须**有一个空格。

单目运算符的两侧**不能**有空格。

冒号的两侧**必须**有一个空格。

```cpp
struct Edge {
    int x;
    Edge() : x(0) {}
}
```

流程控制关键字之后，左圆括号前**必须**有一个空格，函数名之后，左圆括号前**不能**有空格。

对于「花括号不换行」，`do-while` 结构的 `do` 之后，左花括号前**必须**有一个空格，`while` 前**必须**有一个空格。

模板参数表中，如果右方括号前不得不加一个空格，则*可以*在对应的左方括号后加一个空格，为了对称。

`.`、`->`、`::` 的两边**不能**有空格。

### 指针与引用

在描述类型名时，指针符号 `*` 和引用符号 `&` 与左侧的类型名之间**必须**有一个空格，与右侧的其它关键字之间**不能**有空格，如 `char *const` 或 `int *&`。

在定义变量、函数返回值、参数时，指针符号 `*` 和引用符号 `&` 与左侧的类型名之间**必须**有一个空格，与右侧的变量、函数、参数名之间**不能**有空格。

### 命名

所有结构体、函数、变量、参数名**必须**使用驼峰命名法，其中结构体名首字母**必须**大写，其它首字母**必须**小写。

为方便，命名中的单词*可以*使用缩写，函数、变量、参数名*可以*用一个小写字母代替。全局数组*可以*命名为一个大写字母。

```cpp
int aVarWithVeryLongName;

struct Node {
    int dep, s;
}

struct SegT {
    SegT *lc, *rc;
}

bool getAns(std::vector<std::string> &res);
```
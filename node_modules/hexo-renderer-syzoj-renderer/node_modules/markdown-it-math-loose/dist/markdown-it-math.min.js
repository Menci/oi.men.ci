!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).markdownitMath=e()}}(function(){return function o(a,c,s){function l(t,e){if(!c[t]){if(!a[t]){var r="function"==typeof require&&require;if(!e&&r)return r(t,!0);if(u)return u(t,!0);var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}var i=c[t]={exports:{}};a[t][0].call(i.exports,function(e){return l(a[t][1][e]||e)},i,i.exports,o,a,c,s)}return c[t].exports}for(var u="function"==typeof require&&require,e=0;e<s.length;e++)l(s[e]);return l}({1:[function(e,t,r){"use strict";Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(null==e)throw new TypeError("Cannot convert first argument to object");for(var t=Object(e),r=1;r<arguments.length;r++){var n=arguments[r];if(null!=n)for(var i=Object.keys(Object(n)),o=0,a=i.length;o<a;o++){var c=i[o],s=Object.getOwnPropertyDescriptor(n,c);void 0!==s&&s.enumerable&&(t[c]=n[c])}}return t}})},{}],2:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ascii2mathml=c,r.default=void 0;var n,a=(n=e("./lib/parser"))&&n.__esModule?n:{default:n};function c(r,t){if("object"==typeof r)return function(e,t){return c(e,Object.assign({},r,t))};if((t="object"==typeof t?t:{}).annotate=t.annotate||!1,t.bare=t.bare||!1,t.display=t.display||"inline",t.standalone=t.standalone||!1,t.dir=t.dir||"ltr",t.decimalMark=t.decimalMark||".",t.colSep=t.colSep||",",t.rowSep=t.rowSep||";",","===t.decimalMark&&","===t.colSep&&(t.colSep=";"),";"===t.colSep&&";"===t.rowSep&&(t.rowSep=";;"),t.bare){if(t.standalone)throw new Error("Can't output a valid HTML without a root <math> element");if(t.display&&"inline"!==t.display.toLowerCase())throw new Error("Can't display block without root element.");if(t.dir&&"ltr"!==t.dir.toLowerCase())throw new Error("Can't have right-to-left direction without root element.")}var e,n=(0,a.default)(t),i=t.bare?function(e){return e}:function(e){return"<math".concat("inline"!==t.display?' display="'.concat(t.display,'"'):"").concat("ltr"!==t.dir?' dir="'.concat(t.dir,'"'):"",">").concat(e,"</math>")};if(t.annotate){var o=n(r.trim(),"");e=i("<semantics>"+(o===a.default.getlastel(o)?o:"<mrow>".concat(o,"</mrow>"))+'<annotation encoding="application/AsciiMath">'+r+"</annotation></semantics>")}else e=i(n(r.trim(),""));return t.standalone&&(e="<!DOCTYPE html><html><head><title>"+r+"</title></head><body>"+e+"</body></html>"),e}var i=c;r.default=i},{"./lib/parser":4}],3:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.accents=r.fonts=r.groupings=r.operators=r.identifiers=r.numbers=void 0;var n={};r.numbers=n;var i="[0-9\xb2\xb3\xb9\xbc-\xbe\u0660-\u0669\u06f0-\u06f9\u07c0-\u07c9\u0966-\u096f\u09e6-\u09ef\u09f4-\u09f9\u0a66-\u0a6f\u0ae6-\u0aef\u0b66-\u0b6f\u0b72-\u0b77\u0be6-\u0bf2\u0c66-\u0c6f\u0c78-\u0c7e\u0ce6-\u0cef\u0d66-\u0d75\u0e50-\u0e59\u0ed0-\u0ed9\u0f20-\u0f33\u1040-\u1049\u1090-\u1099\u1369-\u137c\u16ee-\u16f0\u17e0-\u17e9\u17f0-\u17f9\u1810-\u1819\u1946-\u194f\u19d0-\u19da\u1a80-\u1a89\u1a90-\u1a99\u1b50-\u1b59\u1bb0-\u1bb9\u1c40-\u1c49\u1c50-\u1c59\u2070\u2074-\u2079\u2080-\u2089\u2150-\u2182\u2185-\u218b\u2460-\u249b\u24ea-\u24ff\u2776-\u2793\u2cfd\u3007\u3021-\u3029\u3038-\u303a\u3192-\u3195\u3220-\u3229\u3248-\u324f\u3251-\u325f\u3280-\u3289\u32b1-\u32bf\u96f6\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d\u5341\u767e\u5343\u4e07\u5104\u5146\u4eac\u5793\ud855\udf71\u79ed\u7a63\u6e9d\u6f97\u6b63\u8f09\u5272\u5206\u5398\u6bdb\u7cf8\u5ffd\u5fae\u7e4a\u6c99\u5875\u57c3\ua620-\ua629\ua6e6-\ua6ef\ua830-\ua835\ua8d0-\ua8d9\ua900-\ua909\ua9d0-\ua9d9\uaa50-\uaa59\uabf0-\uabf9\uff10-\uff19]",o=new RegExp(i);Object.defineProperties(n,{digitRange:{value:i},digitRE:{value:o},isdigit:{value:function(e){return e.match(o)}}});var a=["sin","cos","tan","csc","sec","cot","sinh","cosh","tanh","log","ln","det","dim","lim","mod","gcd","lcm","min","max"],c={Gamma:"\u0393",Delta:"\u0394",Theta:"\u0398",Lambda:"\u039b",Xi:"\u039e",Pi:"\u03a0",Sigma:"\u03a3",Phi:"\u03a6",Psi:"\u03a8",Omega:"\u03a9",alpha:"\u03b1",beta:"\u03b2",gamma:"\u03b3",delta:"\u03b4",epsilon:"\u025b",zeta:"\u03b6",eta:"\u03b7",theta:"\u03b8",iota:"\u03b9",kappa:"\u03ba",lambda:"\u03bb",mu:"\u03bc",nu:"\u03bd",xi:"\u03be",pi:"\u03c0",rho:"\u03c1",sigma:"\u03c3",tau:"\u03c4",upsilon:"\u03c5",phi:"\u03c6",chi:"\u03c7",psi:"\u03c8",omega:"\u03c9",oo:"\u221e","O/":"\u2205",CC:"\u2102",NN:"\u2115",QQ:"\u211a",RR:"\u211d",ZZ:"\u2124"};r.identifiers=c,a.forEach(function(e){c[e]=e}),Object.defineProperty(c,"contains",{value:function(e){return void 0!==c[e]}}),Object.defineProperty(c,"funs",{value:a}),Object.defineProperty(c,"isfun",{value:function(e){return 0<=a.indexOf(e)}});var s={"*":"\xb7","**":"\u2217","***":"\u22c6","//":"/","|":"|",":":":","'":"\u2032","''":"\u2033","'''":"\u2034","''''":"\u2057",xx:"\xd7","-:":"\xf7","|><":"\u22c9","><|":"\u22ca","|><|":"\u22c8","@":"\u2218","o+":"\u2295",ox:"\u2297","o.":"\u2299","!":"!",sum:"\u2211",prod:"\u220f","^^":"\u2227","^^^":"\u22c0",vv:"\u2228",vvv:"\u22c1",nn:"\u2229",nnn:"\u22c2",uu:"\u222a",uuu:"\u22c3",int:"\u222b",oint:"\u222e",dint:"\u222c","+-":"\xb1",del:"\u2202",grad:"\u2207",aleph:"\u2135","/_":"\u2220",diamond:"\u22c4",square:"\u25a1","|__":"\u230a","__|":"\u230b","|~":"\u2308","~|":"\u2309","=":"=","!=":"\u2260","<":"&lt;",">":"&gt;","<=":"\u2264",">=":"\u2265","-<":"\u227a","-<=":"\u2aaf",">-":"\u227b",">-=":"\u2ab0",in:"\u2208","!in":"\u2209",sub:"\u2282",sup:"\u2283",sube:"\u2286",supe:"\u2287","-=":"\u2261","==":"\u2261","~=":"\u2245","~~":"\u2248",prop:"\u221d","<-":"\u2190","->":"\u2192","=>":"\u21d2","<=>":"\u21d4","|->":"\u21a6",">->":"\u21a3","->>":"\u21a0",">->>":"\u2916",uarr:"\u2191",darr:"\u2193",larr:"\u2190",rarr:"\u2192",harr:"\u2194",lArr:"\u21d0",rArr:"\u21d2",hArr:"\u21d4",iff:"\u21d4",",":",",":.":"\u2234","...":"\u2026",cdots:"\u22ef",ddots:"\u22f1",vdots:"\u22ee",if:"if",otherwise:"otherwise",and:"and",or:"or",not:"\xac",AA:"\u2200",EE:"\u2203","_|_":"\u22a5",TT:"\u22a4","|--":"\u22a2","|==":"\u22a8"};r.operators=s,Object.defineProperty(s,"contains",{value:function(e){return void 0!==s[e]}}),Object.defineProperty(s,"get",{value:function(e){return s[e]||e}}),Object.defineProperty(s,"regexp",{value:new RegExp("("+Object.keys(s).sort(function(e,t){return t.length-e.length}).map(function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}).join("|")+"|[+-<=>|~\xac\xb1\xd7\xf7\u03d0\u03d1\u03d2\u03d5\u03f0\u03f1\u03f4\u03f5\u03f6\u0606\u0607\u0608\u2016\u2032\u2033\u2034\u2040\u2044\u2052\u2061-\u2064\u207a-\u207e\u208a-\u208e\u2605\u2606\u2660\u2661\u2662\u2663\u266d\u266e\u266f\ufb29\uff61-\uff68\uff0b\uff1c\uff1d\uff1e\uff3c\uff3e\uff5c\uff5e\uffe2\uffe9\uffea\uffeb\uffec\u2200-\u22ff\u2a00-\u2aff\u27c0-\u27e5\u2980-\u2982\u2999-\u29ff\u2301-\u23ff\u25a0-\u25ff\u2b00-\u2bff\u2190-\u21ff\u27f0-\u27ff\u2900-\u297f\u20d0-\u20ef])")});var l={open:{"(:":"\u27e8","{:":""},close:{":)":"\u27e9",":}":""},complex:{abs:{open:"|",close:"|"},floor:{open:"\u230a",close:"\u230b"},ceil:{open:"\u2308",close:"\u2309"},norm:{open:"\u2225",close:"\u2225"}}};r.groupings=l,Object.defineProperty(l.open,"regexp",{value:/([[\u27e6\u27e8\u27ea\u27ec\u27ee\u2983\u2985\u2987\u2989\u298b\u298d\u298f\u2991\u2993\u2995\u2997]|[({]:?)/}),Object.defineProperty(l.close,"regexp",{value:/([\]\u27e7\u27e9\u27eb\u27ed\u27ef\u2984\u2986\u2988\u298a\u298c\u298e\u2990\u2992\u2994\u2996\u2998]|:?[)}])/}),Object.defineProperty(l.open,"get",{value:function(e){var t=l.open[e];return"string"==typeof t?t:e}}),Object.defineProperty(l.close,"get",{value:function(e){var t=l.close[e];return"string"==typeof t?t:e}}),Object.defineProperty(l.complex,"contains",{value:function(e){return 0<=Object.keys(l.complex).indexOf(e)}}),Object.defineProperty(l.complex,"get",{value:function(e){return l.complex[e]}}),Object.freeze(l.open),Object.freeze(l.close),Object.freeze(l.complex);var u={rm:"normal",bf:"bold",it:"italic",bb:"double-struck",cc:"script",tt:"monospace",fr:"fraktur",sf:"sans-serif"};r.fonts=u,Object.defineProperty(u,"get",{value:function(e){return u[e]}}),Object.defineProperty(u,"regexp",{value:new RegExp("("+Object.keys(u).join("|")+")")});var f={hat:{type:"over",accent:"^"},bar:{type:"over",accent:"\u203e"},ul:{type:"under",accent:"_"},vec:{type:"over",accent:"\u2192"},dot:{type:"over",accent:"\u22c5"},ddot:{type:"over",accent:"\u22c5\u22c5"},tilde:{type:"over",accent:"\u02dc"},cancel:{type:"enclose",attrs:{notation:"updiagonalstrike"}}};r.accents=f,Object.defineProperty(f,"contains",{value:function(e){return 0<=Object.keys(f).indexOf(e)}}),Object.defineProperty(f,"get",{value:function(e){return f[e]}}),Object.defineProperty(f,"regexp",{value:new RegExp("("+Object.keys(f).join("|")+")")})},{}],4:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,ie=(n=e("./syntax"))&&n.__esModule?n:{default:n},oe=e("./lexicon");function ae(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var a,c=e[Symbol.iterator]();!(n=(a=c.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{n||null==c.return||c.return()}finally{if(i)throw o}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function ce(i){return function t(r,n){if("object"==typeof r)return function(e){return t(e,r)};if("object"!=typeof n)return"<".concat(i,">").concat(r,"</").concat(i,">");var e=Object.keys(n).map(function(e){return"".concat(e,'="').concat(n[e],'"')}).join(" ");return"<".concat(i," ").concat(e,">").concat(r,"</").concat(i,">")}}var se=ce("mi"),le=ce("mn"),ue=ce("mo"),fe=ce("mfrac"),pe=ce("msup"),me=ce("msub"),de=ce("msubsup"),he=ce("munder"),ve=ce("mover"),ge=ce("munderover"),be=ce("menclose"),ye=ce("mrow"),xe=ce("msqrt"),Oe=ce("mroot"),je=ce("mfenced"),we=ce("mtable"),ke=ce("mtr"),_e=ce("mtd");function i(Y){var e="."===Y.decimalMark?"\\.":Y.decimalMark,B=new RegExp("^".concat(oe.numbers.digitRange,"+(").concat(e).concat(oe.numbers.digitRange,"+)?")),J=t(Y.colSep),K=t(Y.rowSep),ee=t("\n");function t(c){return function(e){for(var t=[],r=0,n=0,i=0;i<e.length;i+=1){var o=e.slice(i),a=e[i];o.startsWith(c)&&!e.slice(0,i).match(/\\(\\{2})*$/)?0===r&&(t.push(e.slice(n,i)),n=i+c.length):a.match(oe.groupings.open.regexp)?r+=1:a.match(oe.groupings.close.regexp)&&(r-=1)}return t.push(e.slice(n)),t}}var r=function e(t,r,n,i){if(!t)return r;if(t.match(/^\s/)){if(t.match(/^\s+(\/[^\/]|^[^\^]|_[^_|])/))return e(t.trim(),r,!0);var o=t.match(/^ +/),a=o?o[0].length:0;if(1<a){var c='<mspace width="'.concat(a-1,'ex" />');return e(t.trim(),r+c,!0)}return e(t.trim(),r,!0)}var s=ae(re(t,i),2),l=s[0],u=s[1];if((u&&u.trimLeft().startsWith("/")||u.trimLeft().startsWith("./"))&&!u.trimLeft().match(/^\.?\/\//)){var f=ae(function e(t,r){var n=r.trim().startsWith("./"),i=r.trim().slice(n?2:1);var o,a,c;if(i.startsWith(" ")){var s=i.trim().split(" ");o=te(s[0]),c=i.trimLeft().slice(s[0].length+1)}else{var l=re(i),u=ae(l,2);o=u[0],c=u[1]}o=o||ye("");a=fe(Se(t)+Se(o),n&&{bevelled:!0});if(c&&c.trim().startsWith("/")||c.trim().startsWith("./"))return e(a,c);return[a,c]}(l,u),2);l=f[0],u=f[1]}return e(u,r+l,!1)};function te(e){if(0===e.trim().length)return"";var t=r(e,"",!1,!0);return t===o(t)?t:ye(t)}function re(e,t,r){if(!e)return["",""];var n,i,o,a=e[0],c=e.slice(1),s=a+(c.match(/^[A-Za-z]+/)||"");if(e.startsWith("sqrt")){var l=re(e.slice(4).trim(),t);n=xe(l[0]?Se(l[0]):ye("")),i=l[1]}else if(e.startsWith("root")){var u=re(e.slice(4).trimLeft(),t),f=u[0]?Se(u[0]):ye(""),p=re(u[1].trimLeft(),t),m=p[0]?Se(p[0]):ye("");n=Oe(m+f),i=p[1]}else if("\\"===a&&1<e.length)if(e[1].match(/[(\[]/)){var d=function(e){for(var t=e[0],r="("===t?")":"["===t?"]":e[0],n=0,i=0,o=0;o<e.length;o+=1){var a=e[o];if(i+=1,a===r){if(0===(n-=1))break}else a===t&&(n+=1)}return i}(c);n=ue(e.slice(2,d)),i=e.slice(d+1)}else n=ue(e[1]),i=e.slice(2);else if(oe.accents.contains(s)){var h=oe.accents.get(s),v=e.slice(s.length).trimLeft(),g=v.match(/^\s*\(?([ij])\)?/),b=re(v);switch(h.type){case"over":i=g?(n=ve(se("i"===g[1]?"\u0131":"\u0237")+ue(h.accent,{accent:!0})),v.slice(g[0].length)):(n=ve(Se(b[0])+ue(h.accent,{accent:!0})),b[1]);break;case"under":n=he(Se(b[0])+ue(h.accent)),i=b[1];break;case"enclose":n=be(Se(b[0]),h.attrs),i=b[1];break;default:throw new Error("Invalid config for accent "+s)}}else if(ie.default.isfontCommand(e)){var y=ie.default.splitfont(e);n=ce(y.tagname)(y.text,y.font&&{mathvariant:y.font}),i=y.rest}else if(oe.groupings.complex.contains(s)){var x=oe.groupings.complex.get(s),O=re(e.slice(s.length).trimLeft());n=je(Se(O[0]),x),i=O[1]}else if(ie.default.isgroupStart(e)||ie.default.isvertGroupStart(e)){var j=ae(ie.default.isgroupStart(e)?ie.default.splitNextGroup(e):ie.default.splitNextVert(e),5),w=j[1],k=j[2],_=j[3],S=j[4];i=oe.groupings.open.get(S);var P=1<(o=ee(k)).length?o:K(k);if(ie.default.ismatrixInterior(k.trim(),Y.colSep,Y.rowSep)){k.trim().endsWith(Y.colSep)&&(k=k.trimRight().slice(0,-1));var E=function(t,e){var r=function(){var e=J(t);return 1<e.length?e:ee(t)}().map(function(e){return e.trim().slice(1,-1)});return we(r.map(ne).join(""),e)}(k,"{"===w&&""===_&&{columnalign:"center left"});n=je(E,{open:w,close:_})}else if(1<P.length)if(2===P.length&&"("===w&&")"===_){var R=fe(P.map(te).join(""),{linethickness:0});n=je(R,{open:w,close:_})}else{var M=P.map(J);1===Ee(M).length&&Ee(M)[0].match(/^\s*$/)&&(M=M.slice(0,-1));var W=M.map(function(e){return ke(e.map(function(t,r){return function(e){return t(r(e))}}(_e,te)).join(""))}).join("");n=je(we(W),{open:w,close:_})}else{var $=J(k).map(te).join(""),L={open:w,close:_};","!==Y.colSep&&(L.separators=Y.colSep),n=je($,L)}}else if(!t&&ie.default.isgroupable(e,Y)){var C=function e(t){var r=new RegExp("(\\s|".concat(Y.colSep,"|").concat(Y.rowSep,"|$)"));var n=t.match(r),i=t.slice(0,n.index),o=n[0],a=t.slice(n.index+1);var c=i,s=o+a;if(!ie.default.isgroupStart(a.trim())&&ie.default.endsInFunc(i)){var l=e(a);c+=o+l[0],s=l[1]}else if(i.match(/root$/)){var u=e(a),f=e(u[1].trimLeft());c+=o+u[0]+" "+f[0],s=o+f[1]}return[c,s]}(e);n=te(C[0]),i=C[1]}else if(oe.numbers.isdigit(a)){var A=e.match(B)[0];n=le(A),i=c.slice(A.length-1)}else if(e.match(/^#`[^`]+`/)){var q=e.match(/^#`([^`]+)`/)[1];n=le(q),i=e.slice(q.length+3)}else if(e.match(new RegExp("^"+oe.operators.regexp.source))&&!oe.identifiers.contains(s)){var G=ae(ie.default.splitNextOperator(e),2),I=G[0],N=G[1],z=e.startsWith("'"),T=Pe(["\u2202","\u2207"],I),U=Pe(["|"],I),F=e.startsWith("| "),D={};z&&(D.lspace=0,D.rspace=0),T&&(D.rspace=0),U&&(D.stretchy=!0),F&&(D.lspace="veryverythickmathspace",D.rspace="veryverythickmathspace"),n=ue(I,!function(e){return 0===Object.keys(e).length}(D)&&D),i=N}else if(oe.identifiers.contains(s)){var Z=oe.identifiers[s];n=Z.match(/[\u0391-\u03A9\u2100-\u214F\u2200-\u22FF]/)?se(Z,{mathvariant:"normal"}):se(Z),i=c.slice(s.length-1)}else i="O"===a&&"/"===c[0]?(n=se(oe.identifiers["O/"],{mathvariant:"normal"}),c.slice(1)):(n=se(a),c);if(i&&i.trimLeft().match(/\.?[\^_]/))if(r&&r.match(/m(sup|over)/)||!i.trim().startsWith("_")||!(i.trim().length<=1)&&i.trim()[1].match(/[|_]/))if("mover"!==r&&i.trim().startsWith("._")&&(i.trim().length<=2||!i.trim()[2].match(/[|_]/))){var Q=ae(function(e,t){var r,n=re(t.trim().slice(2).trim(),!0,"munder"),i=n[0]?Se(n[0]):ye(""),o=n[1],a=o.match(/^(\.?\^)[^\^]/);if(a){var c=re(o.trim().slice(a[1].length).trim(),!0),s=c[0]?Se(c[0]):ye("");r=ge(e+i+s),o=c[1]}else r=he(e+i);return[r,o]}(n,i),2);n=Q[0],i=Q[1]}else if(r&&r.match(/m(sub|under)/)||!i.trim().startsWith("^")||!(i.trim().length<=1||"^"!==i.trim()[1])){if("munder"!==r&&i.trim().startsWith(".^")&&(i.trim().length<=2||"^"!==i.trim()[2])){var V=ae(function(e,t){var r,n=re(t.trim().slice(2).trim(),!0,"mover"),i=n[0]?Se(n[0]):ye(""),o=n[1],a=o.match(/^(\.?_)[^_|]/);if(a){var c=re(o.trim().slice(a[1].length).trim(),!0),s=c[0]?Se(c[0]):ye("");r=ge(e+s+i),o=c[1]}else r=ve(e+i);return[r,o]}(n,i),2);n=V[0],i=V[1]}}else{var H=ae(function(e,t){var r,n=re(t.trim().slice(1).trim(),!0,"msup"),i=n[0]?Se(n[0]):ye(""),o=n[1];if(o.trim().startsWith("_")&&(o.trim().length<=1||!o.trim()[1].match(/[|_]/))){var a=re(o.trim().slice(1).trim(),!0),c=a[0]?Se(a[0]):ye(""),s=ie.default.shouldGoUnder(e)?ge:de;r=s(e+c+i),o=a[1]}else{var l=ie.default.shouldGoUnder(e)?ve:pe;r=l(e+i)}return[r,o]}(n,i),2);n=H[0],i=H[1]}else{var X=ae(function(e,t){var r,n=re(t.trim().slice(1).trim(),!0,"msub"),i=n[0]?Se(n[0]):ye(""),o=n[1];if(o&&o.trim().startsWith("^")&&(o.trim().length<=1||"^"!==!o.trim()[1])){var a=re(o.trim().slice(1).trim(),!0),c=a[0]?Se(a[0]):ye(""),s=ie.default.shouldGoUnder(e)?ge:de;r=s(e+i+c),o=a[1]}else{var l=ie.default.shouldGoUnder(e)?he:me;r=l(e+i)}return[r,o]}(n,i),2);n=X[0],i=X[1]}return[n,i]}function ne(e,t){if(t="string"==typeof t?t:"",!e||0===e.length)return ke(t);var r=ae(function e(t,r){if(!t||0===t.length)return[_e(r),""];if(t[0]===Y.colSep)return[_e(r),t.slice(1).trim()];var n=re(t),i=ae(n,2),o=i[0],a=i[1];return e(a.trim(),r+o)}(e.trim(),""),2),n=r[0];return ne(r[1].trim(),t+n)}return r}function Se(e){var t=e.replace(/^<mfenced[^>]*>/,"").replace(/<\/mfenced>$/,"");return function(e){var t=o(e);return[e.slice(0,e.lastIndexOf(t)),t]}(t)[1]===t?t:ye(t)}function o(e){var t=e.match(/<\/(m[a-z]+)>$/);if(!t){var r=e.match(/<mspace\s*([a-z]+="[a-z]")*\s*\?>/);if(r){var n=r.match[0].length;return e.slice(n)}return""}for(var i=t[1],o=e.length-(i.length+3),a=0;0<=o;o-=1){if(e.slice(o).startsWith("<".concat(i))){if(0===a)break;a-=1}e.slice(o-2).startsWith("</".concat(i))&&(a+=1)}return e.slice(o)}function Pe(e,t){return 0<=e.indexOf(t)}function Ee(e){return e.slice(-1)[0]}i.getlastel=o;var a=i;r.default=a},{"./lexicon":3,"./syntax":5}],5:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var p=e("./lexicon");function i(e){var t=new RegExp("^"+p.groupings.open.regexp.source);return e.match(t)}var n=new RegExp("("+p.identifiers.funs.concat(Object.keys(p.accents)).concat(["sqrt"]).sort(function(e,t){return e.length-t.length}).join("|")+")$");function m(e){for(var t,r,n,i,o=new RegExp("^"+p.groupings.open.regexp.source),a=new RegExp("^"+p.groupings.close.regexp.source),c=0,s=0;s<e.length;){var l=e.slice(s),u=l.match(o),f=l.match(a);if(u)"number"!=typeof t&&(t=s,n=u[0]),c+=1,s+=u[0].length;else if(f){if(0===(c-=1)){r=s+((i=f[0]).length-1);break}s+=f[0].length}else s+=1}return n?[0===t?"":e.slice(0,t),p.groupings.open.get(n),e.slice(t+n.length,i?r-(i.length-1):e.length),i?p.groupings.close.get(i):"",r?e.slice(r+1):""]:null}function o(e){var t,r,n,i=e.indexOf("|"),o=i+1,a=e.slice(i+1),c=a.startsWith("|"),s=c?/\|\|/:/\|/;if(c&&(a=a.slice(1),o+=1),-1===a.indexOf("|"))return null;if(a.match(/^\.?[_\^]/))return null;for(;0<a.length;){var l=m(a),u=l?l[0]:a,f=l?l[4]:"",p=s.exec(u);if(p)return t=i,r=o+p.index,n=c,[0===t?"":e.slice(0,t),n?"\u2016":"|",e.slice(t+(n?2:1),r),n?"\u2016":"|",e.slice(r+(n?2:1))];o+=l.slice(0,-1).map(d("length")).reduce(h),""===l[1]?o+=2:"\u2329"===l[1]&&(o+=1),""===l[3]?o+=2:"\u232a"===l[3]&&(o+=1),a=f}return null}function d(t){return function(e){return e[t]}}function h(e,t){return e+t}function a(e){var t=new RegExp("^("+p.fonts.regexp.source+" ?)?"+e);return function(e){return t.exec(e)}}var s=a("(`)\\w+`"),l=a('(")');var c=["<mi>lim</mi>","<mo>\u2211</mo>","<mo>\u220f</mo>"];var u={endsInFunc:function(e){return e.match(n)},isgroupStart:i,isgroupable:function(e,t){var r=new RegExp("^[0-9A-Za-z+\\-!]{2,}(\\s|".concat(t.colSep,"|").concat(t.rowSep,")"));return e.match(r)},isvertGroupStart:function(e){if(!e.startsWith("|"))return!1;var t=o(e);return t&&""===t[0]},splitNextGroup:m,splitNextVert:o,splitNextOperator:function(e){var t=new RegExp("^"+p.operators.regexp.source).exec(e)[0];return[p.operators.get(t),e.slice(t.length)]},ismatrixInterior:function(e,t,r){if(!i(e))return!1;var n=m(e)[4];if(!(n.trim().startsWith(t)||n.match(/^\s*\n/)&&i(n.trim())))return!1;for(;n&&n.trim();)if((n=(m(n)||[])[4])&&(n.startsWith(r)||n.match(/^\s*\n/)))return!1;return!0},isfontCommand:function(e){return s(e)||l(e)},splitfont:function(e){var t=s(e)||l(e),r=t&&t[2],n=t&&t[3],i='"'===n?"mtext":"`"===n?"mi":"",o=e.indexOf(n),a=o+1+e.slice(o+1).indexOf(n),c=0<o?p.fonts.get(r):"";return{tagname:i,text:e.slice(o+1,a),font:c,rest:e.slice(a+1)}},shouldGoUnder:function(e){return 0<=c.indexOf(e)}};r.default=u},{"./lexicon":3}],6:[function(e,t,r){"use strict";var n=null;function f(e,t,r){var n=t;return{can_open:!0,can_close:!0,delims:(n+=r)-t}}function u(t){if(null===n)try{n=e("ascii2mathml").default}catch(e){return t&&"block"===t.display?function(e,t){return'<div class="math block">'+e[t].content+"</div>"}:function(e,t){return'<span class="math inline">'+e[t].content+"</span>"}}var r=n(Object.assign({},t));return t&&"block"===t.display?function(e,t){return r(e[t].content)+"\n"}:function(e,t){return r(e[t].content)}}e("./lib/polyfills"),t.exports=function(e,r){var t=(r="object"==typeof r?r:{}).inlineOpen||"$$",n=r.inlineClose||"$$",i=r.blockOpen||"$$$",o=r.blockClose||"$$$",a=r.inlineRenderer?function(e,t){return r.inlineRenderer(e[t].content,e[t])}:u(r.renderingOptions),c=r.blockRenderer?function(e,t){return r.blockRenderer(e[t].content,e[t])+"\n"}:u(Object.assign({display:"block"},r.renderingOptions)),s=function(l,u){return function(e,t){var r,n,i,o,a=e.posMax,c=e.pos,s=e.src.slice(c,c+l.length);if(s!==l)return!1;if(t)return!1;if(r=(i=f(0,c,s.length)).delims,!i.can_open)return e.pos+=r,e.pending+=e.src.slice(c,e.pos),!0;for(e.pos=c+l.length;e.pos<a;){if(e.src.slice(e.pos,e.pos+u.length)===u&&(i=f(0,e.pos,u.length)).can_close){n=!0;break}e.md.inline.skipToken(e)}return n?(e.posMax=e.pos,e.pos=c+u.length,(o=e.push("math_inline","math",0)).content=e.src.slice(e.pos,e.posMax),o.markup=l,e.pos=e.posMax+u.length,e.posMax=a,!0):(e.pos=c,!1)}}(t,n),l=function(m,d){return function(e,t,r,n){var i,o,a,c,s,l,u=!1,f=e.bMarks[t]+e.tShift[t],p=e.eMarks[t];if(f+m.length>p)return!1;if(e.src.slice(f,f+m.length)!==m)return!1;if(f+=m.length,c=e.src.slice(f,p),n)return!0;for(c.trim().slice(-d.length)===d&&(c=c.trim().slice(0,-d.length),u=!0),o=t;!(u||r<=++o||(f=e.bMarks[o]+e.tShift[o])<(p=e.eMarks[o])&&e.tShift[o]<e.blkIndent);)e.src.slice(f,p).trim().slice(-d.length)===d&&(4<=e.tShift[o]-e.blkIndent||(l=e.src.slice(0,p).lastIndexOf(d),f+=(s=e.src.slice(f,l)).length+d.length,(f=e.skipSpaces(f))<p||(u=!0)));return i=e.tShift[t],e.line=o+(u?1:0),(a=e.push("math_block","math",0)).block=!0,a.content=(c&&c.trim()?c+"\n":"")+e.getLines(t+1,o,i,!0)+(s&&s.trim()?s:""),a.info=void 0,a.map=[t,e.line],a.markup=m,!0}}(i,o);e.inline.ruler.before("escape","math_inline",s),e.block.ruler.after("blockquote","math_block",l,{alt:["paragraph","reference","blockquote","list"]}),e.renderer.rules.math_inline=a,e.renderer.rules.math_block=c}},{"./lib/polyfills":1,ascii2mathml:2}]},{},[6])(6)});
